import{X as M,t as V,x as N}from"./index.acfe672b.js";import U from"./index.b2dcd935.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.1834f77f.js";import E from"./index.26e0ef0c.js";import G from"./index.d6d75ef7.js";import{G as j,D as z}from"./api.690fa5a0.js";import{a as C,r,l as A,ak as s,o as y,Q as w,R as n,X as o,b as f,u as c,U as H,H as I}from"./vue.5d8927be.js";import{_ as K}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.es.d2375c1e.js";import"./index.vue_vue_type_script_setup_true_name_svgIcon_lang.0d485959.js";import"./crud.af376dbb.js";import"./authFunction.88002d4f.js";import"./crud.841fa812.js";import"./api.d42bee3a.js";const L={class:"menu-box menu-left-box"},O={style:{height:"80vh"}},P={style:{height:"80vh"}},Q=C({name:"menuPages"}),q=C({...Q,setup(J){let i=r([]),p=r([]),l=r(!1),m=r({}),h=r(null),D=r(null),v=r(null);const _=()=>{j({}).then(a=>{const t=a.data,e=M.toArrayTree(t,{parentKey:"parent",children:"children",strict:!0});i.value=e})},T=a=>{var t,e;(t=D.value)==null||t.handleRefreshTable(a),(e=v.value)==null||e.handleRefreshTable(a)},R=(a,t)=>{var e,u;if(a==="update"&&t){const d=((u=(e=h.value)==null?void 0:e.treeRef)==null?void 0:u.currentNode.parent.data)||{};p.value=[d],m.value=t}l.value=!0},b=a=>{a==="submit"&&_(),l.value=!1,m.value={}},g=(a,t)=>{V.confirm("您确认删除该菜单项吗?","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=await z(a);t(),(e==null?void 0:e.code)===2e3&&(N(e.msg),_())})};return A(()=>{_()}),(a,t)=>{const e=s("el-col"),u=s("el-tab-pane"),d=s("el-tabs"),k=s("el-row"),B=s("el-drawer"),F=s("fs-page");return y(),w(F,null,{default:n(()=>[o(k,{class:"menu-el-row"},{default:n(()=>[o(e,{span:6},{default:n(()=>[f("div",L,[o(U,{ref_key:"menuTreeRef",ref:h,treeData:c(i),onTreeClick:T,onUpdateDept:R,onDeleteDept:g},null,8,["treeData"])])]),_:1}),o(e,{span:18},{default:n(()=>[o(d,{type:"border-card"},{default:n(()=>[o(u,{label:"按钮权限配置"},{default:n(()=>[f("div",O,[o(X,{ref_key:"menuButtonRef",ref:D},null,512)])]),_:1}),o(u,{label:"列权限配置"},{default:n(()=>[f("div",P,[o(G,{ref_key:"menuFieldRef",ref:v},null,512)])]),_:1})]),_:1})]),_:1})]),_:1}),o(B,{modelValue:c(l),"onUpdate:modelValue":t[0]||(t[0]=x=>I(l)?l.value=x:l=x),title:"菜单配置",direction:"rtl",size:"500px","close-on-click-modal":!1,"before-close":b},{default:n(()=>[c(l)?(y(),w(E,{key:0,initFormData:c(m),cacheData:c(p),treeData:c(i),onDrawerClose:b},null,8,["initFormData","cacheData","treeData"])):H("",!0)]),_:1},8,["modelValue"])]),_:1})}}});const ue=K(q,[["__scopeId","data-v-020c0852"]]);export{ue as default};
