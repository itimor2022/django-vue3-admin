import{u as w,a as k}from"./api.d42bee3a.js";import{x as U}from"./index.acfe672b.js";import{a as I,r as V,a0 as b,l as R,ak as d,o as N,c as j,X as l,R as r,u as a,V as y}from"./vue.5d8927be.js";import{_ as B}from"./_plugin-vue_export-helper.c27b6911.js";const M={class:"columns-form-com"},O=I({__name:"index",props:{currentInfo:{type:Object,required:!0,default:()=>{}},initFormData:{type:Object,default:()=>{}}},emits:["drawerClose"],setup(C,{emit:D}){const o=C,g=D,m=V(),v=b({field_name:[{required:!0,message:"请输入字段名！",trigger:"blur"}],title:[{required:!0,message:"请输入列名！",trigger:"blur"}]});let e=b({field_name:"",title:"",is_create:!0,is_update:!0,is_query:!0}),_=V(!1);const F=()=>{var u,t;(u=o.initFormData)!=null&&u.id&&(e.id=((t=o.initFormData)==null?void 0:t.id)||"",e.field_name=o.initFormData.field_name||"",e.title=o.initFormData.title||"",e.is_create=!!o.initFormData.is_create,e.is_update=!!o.initFormData.is_update,e.is_query=!!o.initFormData.is_query)},x=()=>{var u;(u=m.value)==null||u.validate(async t=>{if(t)try{_.value=!0;let i;e.id?i=await w({...e,...o.currentInfo}):i=await k({...e,...o.currentInfo}),(i==null?void 0:i.code)===2e3&&(U(i.msg),p("submit"))}finally{_.value=!1}})},p=(u="")=>{var t;g("drawerClose",u),(t=m.value)==null||t.resetFields()};return R(()=>{F()}),(u,t)=>{const i=d("el-input"),s=d("el-form-item"),f=d("el-switch"),c=d("el-button"),q=d("el-form");return N(),j("div",M,[l(q,{ref_key:"formRef",ref:m,model:a(e),rules:v,"label-width":"80px"},{default:r(()=>[l(s,{label:"字段名",prop:"field_name"},{default:r(()=>[l(i,{modelValue:a(e).field_name,"onUpdate:modelValue":t[0]||(t[0]=n=>a(e).field_name=n),placeholder:"请输入字段名"},null,8,["modelValue"])]),_:1}),l(s,{label:"列名",prop:"title"},{default:r(()=>[l(i,{modelValue:a(e).title,"onUpdate:modelValue":t[1]||(t[1]=n=>a(e).title=n),placeholder:"请输入列名"},null,8,["modelValue"])]),_:1}),l(s,{label:"创建显示"},{default:r(()=>[l(f,{modelValue:a(e).is_create,"onUpdate:modelValue":t[2]||(t[2]=n=>a(e).is_create=n)},null,8,["modelValue"])]),_:1}),l(s,{label:"编辑显示"},{default:r(()=>[l(f,{modelValue:a(e).is_update,"onUpdate:modelValue":t[3]||(t[3]=n=>a(e).is_update=n)},null,8,["modelValue"])]),_:1}),l(s,{label:"查询显示"},{default:r(()=>[l(f,{modelValue:a(e).is_query,"onUpdate:modelValue":t[4]||(t[4]=n=>a(e).is_query=n)},null,8,["modelValue"])]),_:1}),l(s,null,{default:r(()=>[l(c,{type:"primary",onClick:x,loading:a(_)},{default:r(()=>[y(" 确定 ")]),_:1},8,["loading"]),l(c,{onClick:p},{default:r(()=>[y("取消")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const X=B(O,[["__scopeId","data-v-c2c42508"]]);export{X as default};
