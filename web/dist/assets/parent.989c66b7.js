import{j as I,u as P,e as w,S as x,_ as B}from"./index.acfe672b.js";import{a as g,aC as D,aI as E,aD as d,a0 as S,r as U,J,m as f,I as M,n as c,l as O,$ as j,w as Q,ak as X,o as v,c as Y,X as o,R as h,Z as _,Q as R,S as V,Y as y,T as Z,aJ as $,U as b,u as q,aA as z}from"./vue.5d8927be.js";const F={class:"layout-parent"},G=g({name:"layoutParentView"}),se=g({...G,setup(H){const K=z(()=>B(()=>import("./iframes.ebeb348c.js"),["assets/iframes.ebeb348c.js","assets/vue.5d8927be.js"])),t=D(),A=E(),k=I(),T=P(),{keepAliveNames:i,cachedViews:n}=d(k),{themeConfig:u}=d(T),e=S({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),m=U(!0);J("refreshView",function(){m.value=!1,c(()=>{m.value=!0})});const l=f(()=>u.value.animation),L=f(()=>(console.log(n.value),u.value.isTagsview?n.value:e.keepAliveNameList)),p=f(()=>t.meta.isIframe),N=async()=>{A.getRoutes().forEach(a=>{a.meta.isIframe&&(a.meta.isIframeOpen=!1,a.meta.loading=!0,e.iframeList.push({...a}))})};return M(()=>{e.keepAliveNameList=i.value,w.on("onTagsViewRefreshRouterView",a=>{e.keepAliveNameList=i.value.filter(s=>t.name!==s),e.refreshRouterViewKey="",e.iframeRefreshKey="",c(()=>{e.refreshRouterViewKey=a,e.iframeRefreshKey=a,e.keepAliveNameList=i.value})})}),O(()=>{N(),c(()=>{setTimeout(()=>{if(u.value.isCacheTagsView){let a=x.get("tagsViewList")||[];n.value=a.filter(s=>{var r;return(r=s.meta)==null?void 0:r.isKeepAlive}).map(s=>s.name)}},0)})}),j(()=>{w.off("onTagsViewRefreshRouterView",()=>{})}),Q(()=>t.fullPath,()=>{e.refreshRouterViewKey=decodeURI(t.fullPath)},{immediate:!0}),(a,s)=>{const r=X("router-view");return v(),Y("div",F,[o(r,null,{default:h(({Component:C})=>[o(_,{name:l.value,mode:"out-in"},{default:h(()=>[m.value?(v(),R($,{key:0,include:L.value},[V((v(),R(Z(C),{key:e.refreshRouterViewKey,class:"w100"})),[[y,!p.value]])],1032,["include"])):b("",!0)]),_:2},1032,["name"])]),_:1}),o(_,{name:l.value,mode:"out-in"},{default:h(()=>[V(o(q(K),{class:"w100",refreshKey:e.iframeRefreshKey,name:l.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[y,p.value]])]),_:1},8,["name"])])}}});export{se as default};
