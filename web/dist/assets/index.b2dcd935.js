import{g as O}from"./index.es.d2375c1e.js";import{J as W,k as X,y as C}from"./index.acfe672b.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_name_svgIcon_lang.0d485959.js";import{l as q,m as A,a as G}from"./api.690fa5a0.js";import{a as K,r as p,w as Y,ak as i,as as Z,o as r,c as w,X as a,u as x,H as ee,b as y,R as n,V as M,W as T,S as v,Q as k,F as te,aj as ae,ag as ne}from"./vue.5d8927be.js";import{_ as oe}from"./_plugin-vue_export-helper.c27b6911.js";const le={class:"menu-tree-com"},se={class:"mtc-head"},ie={key:0,class:"text-center font-black font-normal"},ce={key:1,class:"text-center font-black text-red-700 font-normal"},re={class:"mtc-tags"},de=K({__name:"index",props:{treeData:{default:()=>[]}},emits:["treeClick","deleteDept","updateDept"],setup(ue,{expose:V,emit:B}){const E=O(ae),R={children:"children",label:"name",icon:"icon",isLeaf:(t,e)=>!e.data.is_catalog},D=p(),h=B;let u=p(""),f=p(!1),l=p({}),b=p(null);Y(u,t=>{D.value.filter(t)});const S=(t,e)=>t?ne(e).name.indexOf(t)!==-1:!0,U=(t,e)=>{t.level!==0&&q({parent:t.data.id}).then(c=>{e(c.data)})},$=(t,e)=>{l.value=t,b.value=e,h("treeClick",t)},z=t=>{if(t==="update"){if(!l.value.id){C("请选择菜单！");return}h("updateDept",t,l.value)}else h("updateDept",t)},F=()=>{if(!l.value.id){C("请选择菜单！");return}h("deleteDept",l.value.id,()=>{l.value={}})},L=async t=>{var s;if(!l.value.id){C("请选择菜单！");return}if(f.value)return;const e=((s=b.value)==null?void 0:s.parent.childNodes)||[],c=e.findIndex(_=>_.data.id===l.value.id),g=e.find(_=>_.data.id===l.value.id);if(t==="up"){if(c===0)return;e.splice(c-1,0,g),e.splice(c+1,1),f.value=!0,await A({menu_id:l.value.id}),f.value=!1}t==="down"&&(e.splice(c+2,0,g),e.splice(c,1),f.value=!0,await G({menu_id:l.value.id}),f.value=!1)};return V({treeRef:D}),(t,e)=>{const c=i("el-input"),g=i("Menu"),s=i("el-icon"),_=i("QuestionFilled"),d=i("el-tooltip"),I=i("Plus"),P=i("Edit"),Q=i("Top"),j=i("Bottom"),H=i("Delete"),m=Z("auth");return r(),w(te,null,[a(c,{modelValue:x(u),"onUpdate:modelValue":e[0]||(e[0]=o=>ee(u)?u.value=o:u=o),"prefix-icon":x(W),placeholder:"请输入菜单名称"},null,8,["modelValue","prefix-icon"]),y("div",le,[y("div",se,[a(s,{size:"16",color:"#606266",class:"mtc-head-icon"},{default:n(()=>[a(g)]),_:1}),M(" 菜单列表 "),a(d,{effect:"dark",placement:"right",content:"1.红色菜单代表状态禁用; 2.添加菜单，如果是目录，组件地址为空即可; 3.添加根节点菜单，父级ID为空即可; 4.支持拖拽菜单;"},{default:n(()=>[a(s,{size:"16",color:"var(--el-color-primary)",class:"mtc-tooltip"},{default:n(()=>[a(_)]),_:1})]),_:1})]),a(x(X),{ref_key:"treeRef",ref:D,data:t.treeData,props:R,"filter-node-method":S,load:U,lazy:"",indent:45,onNodeClick:$,"highlight-current":""},{default:n(({node:o,data:J})=>[a(x(E),{node:o,showLabelLine:!1,indent:32},{default:n(()=>[J.status?(r(),w("span",ie,[a(N,{name:o.data.icon,color:"var(--el-color-primary)"},null,8,["name"]),M("  "+T(o.label),1)])):(r(),w("span",ce,[a(N,{name:o.data.icon},null,8,["name"]),M(" "+T(o.label),1)]))]),_:2},1032,["node"])]),_:1},8,["data"]),y("div",re,[a(d,{effect:"dark",content:"新增"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[1]||(e[1]=o=>z("create")),class:"mtc-tags-icon"},{default:n(()=>[a(I)]),_:1})),[[m,"menu:Create"]])]),_:1}),a(d,{effect:"dark",content:"编辑"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[2]||(e[2]=o=>z("update")),class:"mtc-tags-icon"},{default:n(()=>[a(P)]),_:1})),[[m,"menu:Update"]])]),_:1}),a(d,{effect:"dark",content:"上移"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[3]||(e[3]=o=>L("up")),class:"mtc-tags-icon"},{default:n(()=>[a(Q)]),_:1})),[[m,"menu:MoveUp"]])]),_:1}),a(d,{effect:"dark",content:"下移"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[4]||(e[4]=o=>L("down")),class:"mtc-tags-icon"},{default:n(()=>[a(j)]),_:1})),[[m,"menu:MoveDown"]])]),_:1}),a(d,{effect:"dark",content:"删除"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[5]||(e[5]=o=>F()),class:"mtc-tags-icon"},{default:n(()=>[a(H)]),_:1})),[[m,"menu:Delete"]])]),_:1})])])],64)}}});const he=oe(de,[["__scopeId","data-v-3648c119"]]);export{he as default};
