import{a as k,r as $,aD as H,aC as B,aI as j,a0 as U,l as V,$ as z,aK as E,w as K,ak as M,o as c,c as d,X as _,R as W,b as m,F as X,aa as q,L as C,u as f,W as R,n as G}from"./vue.5d8927be.js";import{a6 as J,u as Q,e as i,a7 as Y}from"./index.acfe672b.js";import{_ as Z}from"./_plugin-vue_export-helper.c27b6911.js";const ee={class:"layout-columns-aside"},te=["onClick","onMouseenter","title"],se={class:"columns-vertical-title font12"},ne=["href"],oe={class:"columns-vertical-title font12"},le=k({name:"layoutColumnsAside"}),ie=k({...le,setup(ae){const v=$([]),A=$(),h=J(),O=Q(),{routesList:x,isColumnsMenuHover:b,isColumnsNavHover:D}=H(h),{themeConfig:a}=H(O),y=B(),L=j(),t=U({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),g=e=>{t.liIndex=e,A.value.style.top=`${v.value[e].offsetTop+t.difference}px`},T=(e,s)=>{g(s);let{path:o,redirect:l}=e;l?L.push(l):L.push(o)},P=(e,s)=>{if(!a.value.isColumnsMenuHoverPreload)return!1;let{path:o}=e;t.liOldPath=o,t.liOldIndex=s,t.liHoverIndex=s,i.emit("setSendColumnsChildren",r(o)),h.setColumnsMenuHover(!1),h.setColumnsNavHover(!0)},N=async()=>{await h.setColumnsNavHover(!1),setTimeout(()=>{!b&&!D&&i.emit("restoreDefault")},100)},I=e=>{G(()=>{g(e)})},w=()=>{var s;t.columnsAsideList=S(x.value);const e=r(y.path);if(Object.keys(e).length<=0)return!1;I((s=e.item)==null?void 0:s.k),i.emit("setSendColumnsChildren",e)},r=e=>{const s=e.split("/");let o={children:[]};return t.columnsAsideList.map((l,n)=>{l.path===`/${s[1]}`&&(l.k=n,o.item={...l},o.children=[{...l}],l.children&&(o.children=l.children))}),o},S=e=>e.filter(s=>{var o;return!((o=s.meta)!=null&&o.isHide)}).map(s=>(s=Object.assign({},s),s.children&&(s.children=S(s.children)),s)),F=e=>{t.routeSplit=e.split("/"),t.routeSplit.shift();const s=`/${t.routeSplit[0]}`,o=t.columnsAsideList.find(l=>l.path===s);if(!o)return!1;setTimeout(()=>{I(o.k)},0)};return V(()=>{w(),i.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),z(()=>{i.off("restoreDefault",()=>{})}),E(e=>{F(e.path),i.emit("setSendColumnsChildren",r(e.path))}),K(Y.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,!e.routesList.isColumnsMenuHover&&!e.routesList.isColumnsNavHover)t.liHoverIndex=null,i.emit("setSendColumnsChildren",r(y.path));else{if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;i.emit("setSendColumnsChildren",r(t.liOldPath))}},{deep:!0}),(e,s)=>{const o=M("SvgIcon"),l=M("el-scrollbar");return c(),d("div",ee,[_(l,null,{default:W(()=>[m("ul",{onMouseleave:s[0]||(s[0]=n=>N())},[(c(!0),d(X,null,q(t.columnsAsideList,(n,u)=>(c(),d("li",{key:u,onClick:p=>T(n,u),onMouseenter:p=>P(n,u),ref_for:!0,ref:p=>{p&&(v.value[u]=p)},class:C({"layout-columns-active":t.liIndex===u,"layout-columns-hover":t.liHoverIndex===u}),title:e.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(c(),d("div",{key:0,class:C(f(a).columnsAsideLayout)},[_(o,{name:n.meta.icon},null,8,["name"]),m("div",se,R(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,f(a).columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],2)):(c(),d("div",{key:1,class:C(f(a).columnsAsideLayout)},[m("a",{href:n.meta.isLink,target:"_blank"},[_(o,{name:n.meta.icon},null,8,["name"]),m("div",oe,R(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,f(a).columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],8,ne)],2))],42,te))),128)),m("div",{ref_key:"columnsAsideActiveRef",ref:A,class:C(f(a).columnsAsideStyle)},null,2)],32)]),_:1})])}}});const de=Z(ie,[["__scopeId","data-v-a5c512c6"]]);export{de as default};
