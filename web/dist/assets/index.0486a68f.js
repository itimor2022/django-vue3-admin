import{c as y,G as N}from"./crud.ad77d502.js";import{w as k,D as R}from"./index.acfe672b.js";import b from"./index.fb28189a.js";import{d as F,a as g,r as t,l as B,ak as c,o as I,Q as G,R as p,X as d,V as S,W as q,O as z,u as _,H as E}from"./vue.5d8927be.js";import"./dictionary.d76d7a20.js";import"./authFunction.88002d4f.js";import"./_plugin-vue_export-helper.c27b6911.js";F("columnPermission",{state:()=>({permission:[]}),actions:{setPermissionData(l){this.permission=l}}});const H=async(l,a,s=[])=>{const i=await l();a.pagination==null&&(a.pagination={show:!0});const o=a.columns,r=["_index","id","create_datetime","update_datetime"].concat(s);for(let e in o)if(!r.includes(e)){o[e].column?o[e].column.show=!1:o[e].column={show:!1},o[e].addForm={show:!1},o[e].editForm={show:!1};for(let n of i.data)r.includes(n.field_name)||n.field_name===e&&(o[e].column.show=n.is_query,o[e].addForm={show:n.is_create},o[e].editForm={show:n.is_update})}return a},M=g({name:"role"}),A=g({...M,setup(l,{expose:a}){let s=t(!1),i=t(null),o=t(null);const r=t(),e=t(),n=t(),x=f=>{i.value=f.id,o.value=f.name,s.value=!0},C=()=>{s.value=!1},{crudExpose:u}=k({crudRef:e,crudBinding:n}),{crudOptions:w}=y({crudExpose:u,rolePermission:r,handleDrawerOpen:x});return R({crudExpose:u,crudOptions:w,context:{}}),B(async()=>{await H(N,w),u.doRefresh()}),a(r),(f,h)=>{const P=c("el-tag"),v=c("fs-crud"),D=c("permission"),V=c("fs-page");return I(),G(V,null,{default:p(()=>[d(v,z({ref_key:"crudRef",ref:e},n.value),{cell_url:p(m=>[d(P,{size:"small"},{default:p(()=>[S(q(m.row.url),1)]),_:2},1024)]),_:1},16),d(D,{ref_key:"rolePermission",ref:r},null,512),d(b,{drawerVisible:_(s),"onUpdate:drawerVisible":h[0]||(h[0]=m=>E(s)?s.value=m:s=m),roleId:_(i),roleName:_(o),onDrawerClose:C},null,8,["drawerVisible","roleId","roleName"])]),_:1})}}});export{A as default};
