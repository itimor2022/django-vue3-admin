import{a as B,r as u,a0 as S,l as F,ak as c,o as f,c as v,X as l,R as s,b as i,V as r,S as O,Y as T,W as h,F as E,aa as I,O as L,u as $}from"./vue.5d8927be.js";import{l as A,x as P,y as U}from"./index.acfe672b.js";import{g as W,c as X}from"./crud.841fa812.js";import{b as Y}from"./api.d42bee3a.js";import{_ as j}from"./_plugin-vue_export-helper.c27b6911.js";import"./authFunction.88002d4f.js";const q={class:"model-card"},z=["value"],G={class:"dialog-footer"},H={style:{height:"80vh"}},J=B({__name:"index",setup(K,{expose:k}){let d=u({name:null});const o=S({model:"",app:"",menu:""}),n=u(!1),_=u([]),y=u(null),x=(e,a)=>{y.value=a,o.model=e.key,o.app=e.app},C=e=>{!e.is_catalog&&e.id?(d.value=e,m.doRefresh()):m.setTableData([])},V=async()=>{if(o.menu=d.value.id,n.value=!1,o.menu&&o.model){const e=await Y(o);(e==null?void 0:e.code)===2e3&&P("匹配成功"),m.doSearch({form:{menu:o.menu,model:o.model}})}else U("请选择角色和模型表！")},{crudBinding:b,crudRef:D,crudExpose:m}=A({createCrudOptions:X,props:o,modelDialog:n,selectOptions:d,allModelData:_});return F(async()=>{const e=await W();_.value=e.data}),k({selectOptions:d,handleRefreshTable:C}),(e,a)=>{const R=c("el-tag"),w=c("el-text"),g=c("el-button"),M=c("el-dialog"),N=c("fs-crud");return f(),v("div",null,[l(M,{ref:"modelRef",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n.value=t),title:"选择model"},{footer:s(()=>[i("span",G,[l(g,{onClick:a[0]||(a[0]=t=>n.value=!1)},{default:s(()=>[r("取消")]),_:1}),l(g,{type:"primary",onClick:V},{default:s(()=>[r(" 确定 ")]),_:1})])]),default:s(()=>[O(i("div",null,[l(R,null,{default:s(()=>[r("已选择:"+h(o.model),1)]),_:1})],512),[[T,o.model]]),i("div",q,[(f(!0),v(E,null,I(_.value,(t,p)=>(f(),v("div",{value:t.key,key:p},[l(w,{type:y.value===p?"primary":"",onClick:Q=>x(t,p)},{default:s(()=>[r(h(t.app+"--"+t.title+"("+t.key+")"),1)]),_:2},1032,["type","onClick"])],8,z))),128))])]),_:1},8,["modelValue"]),i("div",H,[l(N,L({ref_key:"crudRef",ref:D},$(b)),null,16)])])}}});const se=j(J,[["__scopeId","data-v-cae7f71c"]]);export{se as default};
